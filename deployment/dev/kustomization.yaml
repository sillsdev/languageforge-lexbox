apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: languagedepot

resources:
- ../base/
- secrets.yaml
- retain-storageClass.yaml
- lexbox-cache-volume.yaml

configMapGenerator:
- name: otel-config
  files:
    - collector-config.yaml

patches:
  - target:
      version: v1
      kind: PersistentVolumeClaim
      labelSelector: "keepStorageClass != yes"
    path: change-storage-class.patch.yaml
  - path: lexbox-cache-volume.patch.yaml
